<div id="aviso" class="alert alert-success" style="display:none;">
        
    </div>
<form id="agenda-form">
    <h3>Agendamento</h3>
    <hr>
    <ul>
        <li>A quantidade de água pode ser configurada em <a href="/#/config">Configurações</a>.</li>
        <li>O Horário pode ser ajustado em <a href="/#/config">Configurações</a>.</li>
    </ul>
    <hr>
    Ativado:
    <label class="switch pull-right" style="margin-top: -5px;" for = "is-actived">
        <input type="checkbox" id="is-actived">
        <span class="slider"></span>
    </label>
    <div id="activated-area" style="display: none;">
        <hr>
        <br>
        <label for = "hora">Horário:</label>
        <input type="time" id="hora" value="" class="form-control" >
        <br>
        <h4>Dias da semana</h4>
        <hr>
        Domingo:
        <label class="switch pull-right" style="margin-top: -5px;" for = "day-1">
            <input type="checkbox" value="1" id="day-1">
            <span class="slider"></span>
        </label>
        <hr>
        Segunda-feira:
        <label class="switch pull-right" style="margin-top: -5px;" for = "day-2">
                <input type="checkbox" value="1" id="day-2">
                <span class="slider"></span>
        </label>
        <hr>
        Terça-feira:
        <label class="switch pull-right" style="margin-top: -5px;" for = "day-3">
                <input type="checkbox" value="1" id="day-3">
                <span class="slider"></span>
        </label>
        <hr>
        Quarta-feira:
        <label class="switch pull-right" style="margin-top: -5px;" for = "day-4">
                <input type="checkbox" value="1"  id="day-4">
                <span class="slider"></span>
        </label>
        <hr>
        Quinta-feira:
        <label class="switch pull-right" style="margin-top: -5px;" for = "day-5">
                <input type="checkbox" value="1" id="day-5">
                <span class="slider"></span>
        </label>
        <hr>
        Sexta-feira:
        <label class="switch pull-right" style="margin-top: -5px;" for = "day-6">
                <input type="checkbox" value="1" id="day-6">
                <span class="slider"></span>
        </label>
        <hr>
        Sábado:
        <label class="switch pull-right" style="margin-top: -5px;" for = "day-7">
                <input type="checkbox" value="1" id="day-7">
                <span class="slider"></span>
        </label>
        <hr>
        <h5>Ativar Agendamento</h5>
        
        
        <label class="switch pull-right" style="margin-top: -5px;" for = "protect-plant">
            <input type="checkbox" id="protect-plant">
            <span class="slider"></span>
        </label>
        
        <br>
    </div>
    <button class="btn btn-block btn-primary" id="submit-button" type="submit">Salvar</button>

</form>
<script src="assets/js/page/agenda.js"></script>
<!-- <script>
    $(function(){
        Comm.send("/get/qtdAgua/", function(qtdAguaa){
            //console.log(qtdAgua.split("qtdAgua#")[1]);
            $("#ml-input").val(parseInt(qtdAguaa.split("qtdAgua#")[1]));
        });
        Comm.send("/get/agenda/", function(data){
            data = data.split("agenda#")[1];
            if (parseInt(data.substr(0,1)) === 1){
                $("#is-actived").prop('checked', true);
                $("#activated-area").fadeIn();
                var hora = data.substring(1,3);
                var min = data.substring(3,5);
                console.log(parseInt(hora));
                $("#hora").val(hora+":"+min);
                for (var i = 1; i <= 7;i++){
                    console.log(i+4+1);
                    $("#day-"+i).prop('checked', (data.substring(4+i,4+i+1) === "1")? true: false);
                }
                if (data.substring(12,13) === "1"){
                    $("#protect-plant").prop('checked', true);
                } else {
                    $("#protect-plant").prop('checked', false);
                }
                return;
            } else {
                $("#activated-area").fadeOut();
            }
        })
    });
    $("#is-actived").click(function(){
        if ($(this).is(":checked")){
            $("#activated-area").fadeIn();
        } else {
            $("#activated-area").fadeOut();
        }
    });

    $("#agenda-form").submit(function(){
        var $this = $("#submit-button");
        var temp = $($this).html();
        $($this).html("Salvando...").attr('disabled','disabled');
        var builder = "";
        if ($("#is-actived").is(":checked")){
            builder += "1";
        } else {
            builder += "0";
        }
        var  horaV = $("#hora").val().split(":");
        builder += (horaV[0] === undefined) ? "00": ""+horaV[0];
        builder += (horaV[1] === undefined) ? "00": ""+horaV[1];
        for (var i = 5; i <= 11; i++){
            if ($("#day-"+(i-4)).is(":checked")){
                builder += "1";
            }else {
                builder += "0";
            }
        }
        if ($("#protect-plant").is(":checked")){
            builder += "1";
        } else {
            builder += "0";
        }
        Comm.send("/set/agenda/?"+builder.trim(), function(data){
            $this.html(temp).removeAttr("disabled");
            $("#aviso").show().html("O agendamento foi salvo com sucesso!");
        }, function(){
            $this.html(temp).removeAttr("disabled");
        });
        return false;
    });

</script> -->